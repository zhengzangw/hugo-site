---
title: 8. Multimedia
date: 2019-01-28
weight: 8
---

## 流式存储视频

* UDP 流
* HTTP 流
  * 预取视频
  * 客户端应用缓存和TCP缓存
* DASH

## IP 语音

* 消除延时抖动：播放时延
* 从丢包恢复
  * 前向纠错
  * 交织
  * 差错掩盖

## 通信量管理

* 丢弃的选择
  * 公平性
  * 服务质量
  * 预留
* 通信量整形(traffic shaping)
  * 通过减轻分组的堆集，使流量平滑
  * 关注离开交换机的通信量
* 通信量管制(traffic policing)
  * 判断传入分组是否符合服务质量规约
  * 关注进入交换机的通信量

### 权标桶

* 权标补充速率 $R$: 可连续支持的数据率
* 桶大小 $B$：短时间内允许数据率超过 $R$ 的量
* 任意时间段 $T$ 内，发送的数量不能超过 $RT+B$
* 权标生成器以 $R$ bps 向桶中补充权标，到达的分组消耗一定数量的权标进行传输

### 漏桶

* 计数器 $X$: 泄露速率为 1 的漏桶
* 每当有一个分组到达，计数器上升 $I$
* 使计数器超过最大值的分组违规

## 多媒体网络

* 尽可能服务
* 区分服务
* 每连接服务质量(QoS)保证

### Y.1291 框架

* 数据平面
  * 队列管理算法：适当的时候丢弃分组来管理分组队列
  * 排队和调度算法
  * 拥塞避免
  * 分组标记
  * 通信量分类
  * 通信量管制
  * 通信量整形
* 控制平面
  * 准入控制
  * QoS路由选择
  * 资源预留
* 管理平面
  * 服务级别协约
  * 通信量度量和记录
  * 通信量恢复
  * 策略

### 服务级别协约 (SLA)

网络提供者与客户之间的一份合约，规定向客户提供的具体服务内容

* 对将要提供的服务本质的描述
* 希望获得的服务性能级别
* 对服务级别的监视和报告处理过程

### 综合服务体系结构 ISA (RFC 1633)

* 尽最大努力服务机制
  * 路由选择算法
  * 分组丢弃
* 流：由相关IP分组构成的一个可区分的分组流，它是由单个用户活动产生的，并且要求相同的服务质量
* ISA功能
  * 路由选择算法
  * 丢弃策略
  * 准入控制
  * 排队策略
    * 公平排队策略
    * 加权公平排队
* ISA 服务类型
  * 保证服务
    * 提供保证的容量级别或数据率
    * 对排队时延指明上限
    * 没有排队损失
  * 受控服务
    * 和在网络无负载条件下雨尽最大努力服务相似
    * 排队时延不会明显超过某个最小传输时延
    * 几乎没有排队丢失
  * 尽最大努力服务

### RSVP 资源预约协议 (RFC 2205)

* 接受者发起预约
* 软状态：无连接的方法，预约状态是缓存在路由器中的信息，由终端系统装载并周期性地刷新
* 会话：目的IP地址+IP协议标识符+目的端口
* 流描述符：目的端系统发起的预约=流规约+过滤器规约
* 流规约：指明了所希望的服务质量=服务类别+RSpec（定义QoS）+TSpec（描述数据流）
* 过滤器规约：请求预约的分组集合=源地址+UDP/TCP源端口

### 区分服务 (DS, RFC 2475)

* DS 码点 (6bits)：
  * xxxxx0：留作标准设置使用
    * 000000：默认分组类别，尽最大努力转发
    * xxx000： 为向下兼容 IPv4 保留，提供至少等同于 IPv4 优先级功能提供的服务
  * xxxx11：留作实验或本地使用
  * xxxx01：将来可能分配
* 每跳行为(PHB)
  * 快速转发
  * 确认转发

### LDP 标记分发协议 (Label Distribution Protocal, RFC 5036)

* 报文类型
  * 发现：LSR周期性发送 Hello 报文指示存在
  * 会话建立和维持
  * 通告：创建、更改和删除 FEC 标记映射
  * 通知报文
    * 差错通知
    * 建议通知
* LDP 报文 = 首部+多个报文
* 首部

| 版本 | PDU 长度 | LDP 表示符        |
| ---- | -------- | ----------------- |
| 1    |          | 标志 LSR 的唯一性 |

* 报文

| U比特                                        | 报文类型         | 报文长度 | 报文ID | 必选参数 | 可选参数 |
| -------------------------------------------- | ---------------- | -------- | ------ | -------- | -------- |
| 指示如何处理一个位置类型的报文（转发或丢弃） | 识别特定报文类型 |          |        |          |
